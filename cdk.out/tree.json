{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"EcrStack":{"id":"EcrStack","path":"EcrStack","children":{"EcrRepoStaging":{"id":"EcrRepoStaging","path":"EcrStack/EcrRepoStaging","children":{"Resource":{"id":"Resource","path":"EcrStack/EcrRepoStaging/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"imageScanningConfiguration":{"scanOnPush":true},"repositoryName":"eclaut-backend-api-staging"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.185.0","metadata":[{"repositoryName":"*","imageScanOnPush":true,"removalPolicy":"retain"}]}},"EcrRepoProduction":{"id":"EcrRepoProduction","path":"EcrStack/EcrRepoProduction","children":{"Resource":{"id":"Resource","path":"EcrStack/EcrRepoProduction/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"imageScanningConfiguration":{"scanOnPush":true},"repositoryName":"eclaut-backend-api-production"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.185.0","metadata":[{"repositoryName":"*","imageScanOnPush":true,"removalPolicy":"retain"}]}},"CDKMetadata":{"id":"CDKMetadata","path":"EcrStack/CDKMetadata","children":{"Default":{"id":"Default","path":"EcrStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"EcrStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.185.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"EcrStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.185.0"}},"ApiStack-Staging":{"id":"ApiStack-Staging","path":"ApiStack-Staging","children":{"Vpc-staging":{"id":"Vpc-staging","path":"ApiStack-Staging/Vpc-staging","children":{"Resource":{"id":"Resource","path":"ApiStack-Staging/Vpc-staging/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"ApiStack-Staging/Vpc-staging"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.185.0"}},"PublicSubnet1":{"id":"PublicSubnet1","path":"ApiStack-Staging/Vpc-staging/PublicSubnet1","children":{"Subnet":{"id":"Subnet","path":"ApiStack-Staging/Vpc-staging/PublicSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1a","cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PublicSubnet1"}],"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"ApiStack-Staging/Vpc-staging/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiStack-Staging/Vpc-staging/PublicSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PublicSubnet1"}],"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiStack-Staging/Vpc-staging/PublicSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcstagingPublicSubnet1RouteTableB90C2CC6"},"subnetId":{"Ref":"VpcstagingPublicSubnet1SubnetE1605CF4"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiStack-Staging/Vpc-staging/PublicSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VpcstagingIGWFD2437F7"},"routeTableId":{"Ref":"VpcstagingPublicSubnet1RouteTableB90C2CC6"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}},"EIP":{"id":"EIP","path":"ApiStack-Staging/Vpc-staging/PublicSubnet1/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PublicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.185.0"}},"NATGateway":{"id":"NATGateway","path":"ApiStack-Staging/Vpc-staging/PublicSubnet1/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["VpcstagingPublicSubnet1EIPD322659B","AllocationId"]},"subnetId":{"Ref":"VpcstagingPublicSubnet1SubnetE1605CF4"},"tags":[{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PublicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{},{"addNatGateway":["*"]}]}},"PublicSubnet2":{"id":"PublicSubnet2","path":"ApiStack-Staging/Vpc-staging/PublicSubnet2","children":{"Subnet":{"id":"Subnet","path":"ApiStack-Staging/Vpc-staging/PublicSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1b","cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PublicSubnet2"}],"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"ApiStack-Staging/Vpc-staging/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiStack-Staging/Vpc-staging/PublicSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PublicSubnet2"}],"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiStack-Staging/Vpc-staging/PublicSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcstagingPublicSubnet2RouteTable1A0CFE48"},"subnetId":{"Ref":"VpcstagingPublicSubnet2Subnet88D40579"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiStack-Staging/Vpc-staging/PublicSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VpcstagingIGWFD2437F7"},"routeTableId":{"Ref":"VpcstagingPublicSubnet2RouteTable1A0CFE48"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}},"EIP":{"id":"EIP","path":"ApiStack-Staging/Vpc-staging/PublicSubnet2/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PublicSubnet2"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.185.0"}},"NATGateway":{"id":"NATGateway","path":"ApiStack-Staging/Vpc-staging/PublicSubnet2/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["VpcstagingPublicSubnet2EIP97C30AD7","AllocationId"]},"subnetId":{"Ref":"VpcstagingPublicSubnet2Subnet88D40579"},"tags":[{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PublicSubnet2"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{},{"addNatGateway":["*"]}]}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet1","children":{"Subnet":{"id":"Subnet","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1a","cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PrivateSubnet1"}],"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PrivateSubnet1"}],"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcstagingPrivateSubnet1RouteTableA33C9A53"},"subnetId":{"Ref":"VpcstagingPrivateSubnet1Subnet0CCC6C15"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"VpcstagingPublicSubnet1NATGatewayA88BC4AA"},"routeTableId":{"Ref":"VpcstagingPrivateSubnet1RouteTableA33C9A53"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet2","children":{"Subnet":{"id":"Subnet","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1b","cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PrivateSubnet2"}],"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiStack-Staging/Vpc-staging/PrivateSubnet2"}],"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcstagingPrivateSubnet2RouteTable62AF9881"},"subnetId":{"Ref":"VpcstagingPrivateSubnet2SubnetF4C841C2"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiStack-Staging/Vpc-staging/PrivateSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"VpcstagingPublicSubnet2NATGatewayD4BBEB18"},"routeTableId":{"Ref":"VpcstagingPrivateSubnet2RouteTable62AF9881"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]}},"IGW":{"id":"IGW","path":"ApiStack-Staging/Vpc-staging/IGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiStack-Staging/Vpc-staging"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.185.0"}},"VPCGW":{"id":"VPCGW","path":"ApiStack-Staging/Vpc-staging/VPCGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"VpcstagingIGWFD2437F7"},"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.185.0"}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"ApiStack-Staging/Vpc-staging/RestrictDefaultSecurityGroupCustomResource","children":{"Default":{"id":"Default","path":"ApiStack-Staging/Vpc-staging/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.185.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.185.0","metadata":[{"maxAzs":"*"}]}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"ApiStack-Staging/Custom::VpcRestrictDefaultSGCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"ApiStack-Staging/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.185.0"}},"Role":{"id":"Role","path":"ApiStack-Staging/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}},"Handler":{"id":"Handler","path":"ApiStack-Staging/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.185.0"}},"EcsCluster-staging":{"id":"EcsCluster-staging","path":"ApiStack-Staging/EcsCluster-staging","children":{"Resource":{"id":"Resource","path":"ApiStack-Staging/EcsCluster-staging/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.185.0","metadata":[{"vpc":"*"}]}},"TaskDef-staging":{"id":"TaskDef-staging","path":"ApiStack-Staging/TaskDef-staging","children":{"TaskRole":{"id":"TaskRole","path":"ApiStack-Staging/TaskDef-staging/TaskRole","children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"ApiStack-Staging/TaskDef-staging/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack-Staging/TaskDef-staging/TaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}}]}},"Resource":{"id":"Resource","path":"ApiStack-Staging/TaskDef-staging/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":"084828585414.dkr.ecr.eu-west-1.amazonaws.com/eclaut-backend-api-staging:latest","memory":512,"name":"AppContainer-staging","portMappings":[{"containerPort":3000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"TaskDefstagingAppContainerstagingLogGroup6BB644A8"},"awslogs-stream-prefix":"ecs-staging","awslogs-region":"eu-west-1"}}}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["TaskDefstagingExecutionRole4F48B914","Arn"]},"family":"ApiStackStagingTaskDefstaging025BFF08","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["TaskDefstagingTaskRole37D75883","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.185.0"}},"AppContainer-staging":{"id":"AppContainer-staging","path":"ApiStack-Staging/TaskDef-staging/AppContainer-staging","children":{"LogGroup":{"id":"LogGroup","path":"ApiStack-Staging/TaskDef-staging/AppContainer-staging/LogGroup","children":{"Resource":{"id":"Resource","path":"ApiStack-Staging/TaskDef-staging/AppContainer-staging/LogGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.185.0","metadata":[{"retention":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.185.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"ApiStack-Staging/TaskDef-staging/ExecutionRole","children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"ApiStack-Staging/TaskDef-staging/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack-Staging/TaskDef-staging/ExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack-Staging/TaskDef-staging/ExecutionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ApiStack-Staging/TaskDef-staging/ExecutionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TaskDefstagingAppContainerstagingLogGroup6BB644A8","Arn"]}}],"Version":"2012-10-17"},"policyName":"TaskDefstagingExecutionRoleDefaultPolicy7CF20982","roles":[{"Ref":"TaskDefstagingExecutionRole4F48B914"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"roleName":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.185.0","metadata":["*","*","*","*","*"]}},"LB-staging":{"id":"LB-staging","path":"ApiStack-Staging/LB-staging","children":{"Resource":{"id":"Resource","path":"ApiStack-Staging/LB-staging/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["LBstagingSecurityGroupB4F388F4","GroupId"]}],"subnets":[{"Ref":"VpcstagingPublicSubnet1SubnetE1605CF4"},{"Ref":"VpcstagingPublicSubnet2Subnet88D40579"}],"type":"application"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.185.0"}},"SecurityGroup":{"id":"SecurityGroup","path":"ApiStack-Staging/LB-staging/SecurityGroup","children":{"Resource":{"id":"Resource","path":"ApiStack-Staging/LB-staging/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB ApiStackStagingLBstagingD6E39D06","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.185.0"}},"to ApiStackStagingFargateServicestagingSecurityGroup3A138208:3000":{"id":"to ApiStackStagingFargateServicestagingSecurityGroup3A138208:3000","path":"ApiStack-Staging/LB-staging/SecurityGroup/to ApiStackStagingFargateServicestagingSecurityGroup3A138208:3000","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["FargateServicestagingSecurityGroup4BCB28D2","GroupId"]},"fromPort":3000,"groupId":{"Fn::GetAtt":["LBstagingSecurityGroupB4F388F4","GroupId"]},"ipProtocol":"tcp","toPort":3000}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.185.0","metadata":[{"vpc":"*","description":"*","allowAllOutbound":false},{"addIngressRule":[{"canInlineRule":true,"connections":"*","uniqueId":"*"},{},"*",false]},{"addEgressRule":["*",{},"*",true]}]}},"Listener-staging":{"id":"Listener-staging","path":"ApiStack-Staging/LB-staging/Listener-staging","children":{"Resource":{"id":"Resource","path":"ApiStack-Staging/LB-staging/Listener-staging/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"LBstagingListenerstagingAppTargetstagingGroupC86F11E8"}}],"loadBalancerArn":{"Ref":"LBstaging3F86DA4A"},"port":80,"protocol":"HTTP"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.185.0"}},"AppTarget-stagingGroup":{"id":"AppTarget-stagingGroup","path":"ApiStack-Staging/LB-staging/Listener-staging/AppTarget-stagingGroup","children":{"Resource":{"id":"Resource","path":"ApiStack-Staging/LB-staging/Listener-staging/AppTarget-stagingGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"port":3000,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.185.0","metadata":["*","*","*","*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.185.0","metadata":["*","*"]}},"FargateService-staging":{"id":"FargateService-staging","path":"ApiStack-Staging/FargateService-staging","children":{"Service":{"id":"Service","path":"ApiStack-Staging/FargateService-staging/Service","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"EcsClusterstaging0EACB67A"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"LBstagingListenerstagingAppTargetstagingGroupC86F11E8"},"containerName":"AppContainer-staging","containerPort":3000}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"VpcstagingPrivateSubnet1Subnet0CCC6C15"},{"Ref":"VpcstagingPrivateSubnet2SubnetF4C841C2"}],"securityGroups":[{"Fn::GetAtt":["FargateServicestagingSecurityGroup4BCB28D2","GroupId"]}]}},"taskDefinition":{"Ref":"TaskDefstaging5D54F738"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.185.0"}},"SecurityGroup":{"id":"SecurityGroup","path":"ApiStack-Staging/FargateService-staging/SecurityGroup","children":{"Resource":{"id":"Resource","path":"ApiStack-Staging/FargateService-staging/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"ApiStack-Staging/FargateService-staging/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"Vpcstaging6814183B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.185.0"}},"from ApiStackStagingLBstagingSecurityGroup5BD92949:3000":{"id":"from ApiStackStagingLBstagingSecurityGroup5BD92949:3000","path":"ApiStack-Staging/FargateService-staging/SecurityGroup/from ApiStackStagingLBstagingSecurityGroup5BD92949:3000","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":3000,"groupId":{"Fn::GetAtt":["FargateServicestagingSecurityGroup4BCB28D2","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LBstagingSecurityGroupB4F388F4","GroupId"]},"toPort":3000}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.185.0","metadata":[{"vpc":"*"},{"addIngressRule":["*",{},"*",false]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.185.0","metadata":["*"]}},"LoadBalancerDNS-staging":{"id":"LoadBalancerDNS-staging","path":"ApiStack-Staging/LoadBalancerDNS-staging","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.185.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ApiStack-Staging/CDKMetadata","children":{"Default":{"id":"Default","path":"ApiStack-Staging/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiStack-Staging/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.185.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiStack-Staging/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.185.0"}},"ApiStack-Production":{"id":"ApiStack-Production","path":"ApiStack-Production","children":{"Vpc-production":{"id":"Vpc-production","path":"ApiStack-Production/Vpc-production","children":{"Resource":{"id":"Resource","path":"ApiStack-Production/Vpc-production/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"ApiStack-Production/Vpc-production"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.185.0"}},"PublicSubnet1":{"id":"PublicSubnet1","path":"ApiStack-Production/Vpc-production/PublicSubnet1","children":{"Subnet":{"id":"Subnet","path":"ApiStack-Production/Vpc-production/PublicSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1a","cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ApiStack-Production/Vpc-production/PublicSubnet1"}],"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"ApiStack-Production/Vpc-production/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiStack-Production/Vpc-production/PublicSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiStack-Production/Vpc-production/PublicSubnet1"}],"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiStack-Production/Vpc-production/PublicSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcproductionPublicSubnet1RouteTable9F26980B"},"subnetId":{"Ref":"VpcproductionPublicSubnet1Subnet0DDF2C75"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiStack-Production/Vpc-production/PublicSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VpcproductionIGWC3E220C9"},"routeTableId":{"Ref":"VpcproductionPublicSubnet1RouteTable9F26980B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}},"EIP":{"id":"EIP","path":"ApiStack-Production/Vpc-production/PublicSubnet1/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"ApiStack-Production/Vpc-production/PublicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.185.0"}},"NATGateway":{"id":"NATGateway","path":"ApiStack-Production/Vpc-production/PublicSubnet1/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["VpcproductionPublicSubnet1EIPF9AFE689","AllocationId"]},"subnetId":{"Ref":"VpcproductionPublicSubnet1Subnet0DDF2C75"},"tags":[{"key":"Name","value":"ApiStack-Production/Vpc-production/PublicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{},{"addNatGateway":["*"]}]}},"PublicSubnet2":{"id":"PublicSubnet2","path":"ApiStack-Production/Vpc-production/PublicSubnet2","children":{"Subnet":{"id":"Subnet","path":"ApiStack-Production/Vpc-production/PublicSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1b","cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ApiStack-Production/Vpc-production/PublicSubnet2"}],"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"ApiStack-Production/Vpc-production/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiStack-Production/Vpc-production/PublicSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiStack-Production/Vpc-production/PublicSubnet2"}],"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiStack-Production/Vpc-production/PublicSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcproductionPublicSubnet2RouteTable995A695F"},"subnetId":{"Ref":"VpcproductionPublicSubnet2SubnetFEF797A4"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiStack-Production/Vpc-production/PublicSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VpcproductionIGWC3E220C9"},"routeTableId":{"Ref":"VpcproductionPublicSubnet2RouteTable995A695F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}},"EIP":{"id":"EIP","path":"ApiStack-Production/Vpc-production/PublicSubnet2/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"ApiStack-Production/Vpc-production/PublicSubnet2"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.185.0"}},"NATGateway":{"id":"NATGateway","path":"ApiStack-Production/Vpc-production/PublicSubnet2/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["VpcproductionPublicSubnet2EIPF83C0371","AllocationId"]},"subnetId":{"Ref":"VpcproductionPublicSubnet2SubnetFEF797A4"},"tags":[{"key":"Name","value":"ApiStack-Production/Vpc-production/PublicSubnet2"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{},{"addNatGateway":["*"]}]}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"ApiStack-Production/Vpc-production/PrivateSubnet1","children":{"Subnet":{"id":"Subnet","path":"ApiStack-Production/Vpc-production/PrivateSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1a","cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"ApiStack-Production/Vpc-production/PrivateSubnet1"}],"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"ApiStack-Production/Vpc-production/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiStack-Production/Vpc-production/PrivateSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiStack-Production/Vpc-production/PrivateSubnet1"}],"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiStack-Production/Vpc-production/PrivateSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcproductionPrivateSubnet1RouteTable87E134DD"},"subnetId":{"Ref":"VpcproductionPrivateSubnet1Subnet8263D914"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiStack-Production/Vpc-production/PrivateSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"VpcproductionPublicSubnet1NATGatewayD3AD9E84"},"routeTableId":{"Ref":"VpcproductionPrivateSubnet1RouteTable87E134DD"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"ApiStack-Production/Vpc-production/PrivateSubnet2","children":{"Subnet":{"id":"Subnet","path":"ApiStack-Production/Vpc-production/PrivateSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1b","cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"ApiStack-Production/Vpc-production/PrivateSubnet2"}],"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"ApiStack-Production/Vpc-production/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiStack-Production/Vpc-production/PrivateSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiStack-Production/Vpc-production/PrivateSubnet2"}],"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiStack-Production/Vpc-production/PrivateSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcproductionPrivateSubnet2RouteTable8FFB58FA"},"subnetId":{"Ref":"VpcproductionPrivateSubnet2Subnet75FD0EC7"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiStack-Production/Vpc-production/PrivateSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"VpcproductionPublicSubnet2NATGatewayF3929787"},"routeTableId":{"Ref":"VpcproductionPrivateSubnet2RouteTable8FFB58FA"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]}},"IGW":{"id":"IGW","path":"ApiStack-Production/Vpc-production/IGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiStack-Production/Vpc-production"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.185.0"}},"VPCGW":{"id":"VPCGW","path":"ApiStack-Production/Vpc-production/VPCGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"VpcproductionIGWC3E220C9"},"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.185.0"}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"ApiStack-Production/Vpc-production/RestrictDefaultSecurityGroupCustomResource","children":{"Default":{"id":"Default","path":"ApiStack-Production/Vpc-production/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.185.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.185.0","metadata":[{"maxAzs":"*"}]}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"ApiStack-Production/Custom::VpcRestrictDefaultSGCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"ApiStack-Production/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.185.0"}},"Role":{"id":"Role","path":"ApiStack-Production/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}},"Handler":{"id":"Handler","path":"ApiStack-Production/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.185.0"}},"EcsCluster-production":{"id":"EcsCluster-production","path":"ApiStack-Production/EcsCluster-production","children":{"Resource":{"id":"Resource","path":"ApiStack-Production/EcsCluster-production/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.185.0","metadata":[{"vpc":"*"}]}},"TaskDef-production":{"id":"TaskDef-production","path":"ApiStack-Production/TaskDef-production","children":{"TaskRole":{"id":"TaskRole","path":"ApiStack-Production/TaskDef-production/TaskRole","children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"ApiStack-Production/TaskDef-production/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack-Production/TaskDef-production/TaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}}]}},"Resource":{"id":"Resource","path":"ApiStack-Production/TaskDef-production/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":"084828585414.dkr.ecr.eu-west-1.amazonaws.com/eclaut-backend-api-production:latest","memory":2048,"name":"AppContainer-production","portMappings":[{"containerPort":3000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"TaskDefproductionAppContainerproductionLogGroup0AE2620D"},"awslogs-stream-prefix":"ecs-production","awslogs-region":"eu-west-1"}}}],"cpu":"1024","executionRoleArn":{"Fn::GetAtt":["TaskDefproductionExecutionRole614E5C66","Arn"]},"family":"ApiStackProductionTaskDefproduction85FF00A5","memory":"2048","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["TaskDefproductionTaskRoleF088A7F3","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.185.0"}},"AppContainer-production":{"id":"AppContainer-production","path":"ApiStack-Production/TaskDef-production/AppContainer-production","children":{"LogGroup":{"id":"LogGroup","path":"ApiStack-Production/TaskDef-production/AppContainer-production/LogGroup","children":{"Resource":{"id":"Resource","path":"ApiStack-Production/TaskDef-production/AppContainer-production/LogGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.185.0","metadata":[{"retention":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.185.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"ApiStack-Production/TaskDef-production/ExecutionRole","children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"ApiStack-Production/TaskDef-production/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack-Production/TaskDef-production/ExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack-Production/TaskDef-production/ExecutionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ApiStack-Production/TaskDef-production/ExecutionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TaskDefproductionAppContainerproductionLogGroup0AE2620D","Arn"]}}],"Version":"2012-10-17"},"policyName":"TaskDefproductionExecutionRoleDefaultPolicy71EA5A47","roles":[{"Ref":"TaskDefproductionExecutionRole614E5C66"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"roleName":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.185.0","metadata":["*","*","*","*","*"]}},"LB-production":{"id":"LB-production","path":"ApiStack-Production/LB-production","children":{"Resource":{"id":"Resource","path":"ApiStack-Production/LB-production/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["LBproductionSecurityGroup868A4402","GroupId"]}],"subnets":[{"Ref":"VpcproductionPublicSubnet1Subnet0DDF2C75"},{"Ref":"VpcproductionPublicSubnet2SubnetFEF797A4"}],"type":"application"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.185.0"}},"SecurityGroup":{"id":"SecurityGroup","path":"ApiStack-Production/LB-production/SecurityGroup","children":{"Resource":{"id":"Resource","path":"ApiStack-Production/LB-production/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB ApiStackProductionLBproduction44D7B4FD","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.185.0"}},"to ApiStackProductionFargateServiceproductionSecurityGroup6945027E:3000":{"id":"to ApiStackProductionFargateServiceproductionSecurityGroup6945027E:3000","path":"ApiStack-Production/LB-production/SecurityGroup/to ApiStackProductionFargateServiceproductionSecurityGroup6945027E:3000","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["FargateServiceproductionSecurityGroupD73B4774","GroupId"]},"fromPort":3000,"groupId":{"Fn::GetAtt":["LBproductionSecurityGroup868A4402","GroupId"]},"ipProtocol":"tcp","toPort":3000}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.185.0","metadata":[{"vpc":"*","description":"*","allowAllOutbound":false},{"addIngressRule":[{"canInlineRule":true,"connections":"*","uniqueId":"*"},{},"*",false]},{"addEgressRule":["*",{},"*",true]}]}},"Listener-production":{"id":"Listener-production","path":"ApiStack-Production/LB-production/Listener-production","children":{"Resource":{"id":"Resource","path":"ApiStack-Production/LB-production/Listener-production/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"LBproductionListenerproductionAppTargetproductionGroup7CA5500C"}}],"loadBalancerArn":{"Ref":"LBproductionFD5DBA34"},"port":80,"protocol":"HTTP"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.185.0"}},"AppTarget-productionGroup":{"id":"AppTarget-productionGroup","path":"ApiStack-Production/LB-production/Listener-production/AppTarget-productionGroup","children":{"Resource":{"id":"Resource","path":"ApiStack-Production/LB-production/Listener-production/AppTarget-productionGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"port":3000,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.185.0","metadata":["*","*","*","*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.185.0","metadata":["*","*"]}},"FargateService-production":{"id":"FargateService-production","path":"ApiStack-Production/FargateService-production","children":{"Service":{"id":"Service","path":"ApiStack-Production/FargateService-production/Service","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"EcsClusterproduction5DB950F3"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":3,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"LBproductionListenerproductionAppTargetproductionGroup7CA5500C"},"containerName":"AppContainer-production","containerPort":3000}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"VpcproductionPrivateSubnet1Subnet8263D914"},{"Ref":"VpcproductionPrivateSubnet2Subnet75FD0EC7"}],"securityGroups":[{"Fn::GetAtt":["FargateServiceproductionSecurityGroupD73B4774","GroupId"]}]}},"taskDefinition":{"Ref":"TaskDefproduction6B864ADF"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.185.0"}},"SecurityGroup":{"id":"SecurityGroup","path":"ApiStack-Production/FargateService-production/SecurityGroup","children":{"Resource":{"id":"Resource","path":"ApiStack-Production/FargateService-production/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"ApiStack-Production/FargateService-production/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"Vpcproduction70517E13"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.185.0"}},"from ApiStackProductionLBproductionSecurityGroup25C521C0:3000":{"id":"from ApiStackProductionLBproductionSecurityGroup25C521C0:3000","path":"ApiStack-Production/FargateService-production/SecurityGroup/from ApiStackProductionLBproductionSecurityGroup25C521C0:3000","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":3000,"groupId":{"Fn::GetAtt":["FargateServiceproductionSecurityGroupD73B4774","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LBproductionSecurityGroup868A4402","GroupId"]},"toPort":3000}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.185.0","metadata":[{"vpc":"*"},{"addIngressRule":["*",{},"*",false]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.185.0","metadata":["*"]}},"LoadBalancerDNS-production":{"id":"LoadBalancerDNS-production","path":"ApiStack-Production/LoadBalancerDNS-production","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.185.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ApiStack-Production/CDKMetadata","children":{"Default":{"id":"Default","path":"ApiStack-Production/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiStack-Production/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.185.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiStack-Production/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.185.0"}},"PipelineStack":{"id":"PipelineStack","path":"PipelineStack","children":{"CDKBuildProject":{"id":"CDKBuildProject","path":"PipelineStack/CDKBuildProject","children":{"Role":{"id":"Role","path":"PipelineStack/CDKBuildProject/Role","children":{"ImportRole":{"id":"ImportRole","path":"PipelineStack/CDKBuildProject/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PipelineStack/CDKBuildProject/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/CDKBuildProject/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PipelineStack/CDKBuildProject/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:logs:eu-west-1:084828585414:log-group:/aws/codebuild/",{"Ref":"CDKBuildProject96462ED9"},":*"]]},{"Fn::Join":["",["arn:aws:logs:eu-west-1:084828585414:log-group:/aws/codebuild/",{"Ref":"CDKBuildProject96462ED9"}]]}]},{"Action":["codebuild:BatchPutCodeCoverages","codebuild:BatchPutTestCases","codebuild:CreateReport","codebuild:CreateReportGroup","codebuild:UpdateReport"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:codebuild:eu-west-1:084828585414:report-group/",{"Ref":"CDKBuildProject96462ED9"},"-*"]]}},{"Action":"*","Effect":"Allow","Resource":"*"},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["CDKPipelineArtifactsBucket831C00C4","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CDKPipelineArtifactsBucket831C00C4","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CDKBuildProjectRoleDefaultPolicy977543DD","roles":[{"Ref":"CDKBuildProjectRoleC798FB78"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Resource":{"id":"Resource","path":"PipelineStack/CDKBuildProject/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":true,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["CDKBuildProjectRoleC798FB78","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"runtime-versions\": {\n        \"nodejs\": \"18\"\n      },\n      \"commands\": [\n        \"npm install -g aws-cdk\",\n        \"yarn install\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"cdk synth\",\n        \"cdk deploy --all --require-approval never\"\n      ]\n    }\n  },\n  \"artifacts\": {\n    \"files\": [\n      \"**/*\"\n    ]\n  }\n}"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.185.0","metadata":[{},{},{}]}},"CDKPipeline":{"id":"CDKPipeline","path":"PipelineStack/CDKPipeline","children":{"ArtifactsBucket":{"id":"ArtifactsBucket","path":"PipelineStack/CDKPipeline/ArtifactsBucket","children":{"Resource":{"id":"Resource","path":"PipelineStack/CDKPipeline/ArtifactsBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.185.0"}},"Policy":{"id":"Policy","path":"PipelineStack/CDKPipeline/ArtifactsBucket/Policy","children":{"Resource":{"id":"Resource","path":"PipelineStack/CDKPipeline/ArtifactsBucket/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"CDKPipelineArtifactsBucket831C00C4"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["CDKPipelineArtifactsBucket831C00C4","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CDKPipelineArtifactsBucket831C00C4","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.185.0","metadata":[{"bucket":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.185.0","metadata":[{"bucketName":"*","encryptionKey":"*","encryption":"KMS_MANAGED","enforceSSL":true,"blockPublicAccess":"*","removalPolicy":"retain"}]}},"Role":{"id":"Role","path":"PipelineStack/CDKPipeline/Role","children":{"ImportRole":{"id":"ImportRole","path":"PipelineStack/CDKPipeline/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PipelineStack/CDKPipeline/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/CDKPipeline/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PipelineStack/CDKPipeline/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["CDKPipelineArtifactsBucket831C00C4","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CDKPipelineArtifactsBucket831C00C4","Arn"]},"/*"]]}]},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":[{"Fn::GetAtt":["CDKPipelineBuildAndDeployCDKBuildDeployCodePipelineActionRole8B8F870C","Arn"]},{"Fn::GetAtt":["CDKPipelineSourceBitbucketSourceCodePipelineActionRole667B9CDC","Arn"]}]}],"Version":"2012-10-17"},"policyName":"CDKPipelineRoleDefaultPolicy7E182877","roles":[{"Ref":"CDKPipelineRole38866DD0"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Resource":{"id":"Resource","path":"PipelineStack/CDKPipeline/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"CDKPipelineArtifactsBucket831C00C4"}},"name":"eclaut-cdk-pipeline","pipelineType":"V2","roleArn":{"Fn::GetAtt":["CDKPipelineRole38866DD0","Arn"]},"stages":[{"name":"Source","actions":[{"name":"BitbucketSource","outputArtifacts":[{"name":"Artifact_Source_BitbucketSource"}],"actionTypeId":{"category":"Source","version":"1","owner":"AWS","provider":"CodeStarSourceConnection"},"configuration":{"ConnectionArn":"arn:aws:codestar-connections:eu-west-1:<account-id>:connection/<connection-id>","FullRepositoryId":"your-bitbucket-username/your-repo-name","BranchName":"master"},"runOrder":1,"roleArn":{"Fn::GetAtt":["CDKPipelineSourceBitbucketSourceCodePipelineActionRole667B9CDC","Arn"]}}]},{"name":"BuildAndDeploy","actions":[{"name":"CDK_Build_Deploy","inputArtifacts":[{"name":"Artifact_Source_BitbucketSource"}],"outputArtifacts":[{"name":"Artifact_BuildAndDeploy_CDK_Build_Deploy"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"CDKBuildProject96462ED9"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["CDKPipelineBuildAndDeployCDKBuildDeployCodePipelineActionRole8B8F870C","Arn"]}}]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"2.185.0"}},"Source":{"id":"Source","path":"PipelineStack/CDKPipeline/Source","children":{"BitbucketSource":{"id":"BitbucketSource","path":"PipelineStack/CDKPipeline/Source/BitbucketSource","children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"PipelineStack/CDKPipeline/Source/BitbucketSource/CodePipelineActionRole","children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"PipelineStack/CDKPipeline/Source/BitbucketSource/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PipelineStack/CDKPipeline/Source/BitbucketSource/CodePipelineActionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CDKPipelineRole38866DD0","Arn"]}}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/CDKPipeline/Source/BitbucketSource/CodePipelineActionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PipelineStack/CDKPipeline/Source/BitbucketSource/CodePipelineActionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"codestar-connections:UseConnection","Effect":"Allow","Resource":"arn:aws:codestar-connections:eu-west-1:<account-id>:connection/<connection-id>"},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["CDKPipelineArtifactsBucket831C00C4","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CDKPipelineArtifactsBucket831C00C4","Arn"]},"/*"]]}]},{"Action":["s3:PutObjectAcl","s3:PutObjectVersionAcl"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["CDKPipelineArtifactsBucket831C00C4","Arn"]},"/*"]]}}],"Version":"2012-10-17"},"policyName":"CDKPipelineSourceBitbucketSourceCodePipelineActionRoleDefaultPolicy67224915","roles":[{"Ref":"CDKPipelineSourceBitbucketSourceCodePipelineActionRole667B9CDC"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"grantAssumeRole":["*"]},{"grant":["*","*"]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BuildAndDeploy":{"id":"BuildAndDeploy","path":"PipelineStack/CDKPipeline/BuildAndDeploy","children":{"CDK_Build_Deploy":{"id":"CDK_Build_Deploy","path":"PipelineStack/CDKPipeline/BuildAndDeploy/CDK_Build_Deploy","children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"PipelineStack/CDKPipeline/BuildAndDeploy/CDK_Build_Deploy/CodePipelineActionRole","children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"PipelineStack/CDKPipeline/BuildAndDeploy/CDK_Build_Deploy/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PipelineStack/CDKPipeline/BuildAndDeploy/CDK_Build_Deploy/CodePipelineActionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CDKPipelineRole38866DD0","Arn"]}}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/CDKPipeline/BuildAndDeploy/CDK_Build_Deploy/CodePipelineActionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PipelineStack/CDKPipeline/BuildAndDeploy/CDK_Build_Deploy/CodePipelineActionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["CDKBuildProject96462ED9","Arn"]}}],"Version":"2012-10-17"},"policyName":"CDKPipelineBuildAndDeployCDKBuildDeployCodePipelineActionRoleDefaultPolicy57DE5EF5","roles":[{"Ref":"CDKPipelineBuildAndDeployCDKBuildDeployCodePipelineActionRole8B8F870C"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"grantAssumeRole":["*"]},{"grant":["*","*"]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"2.185.0","metadata":[{"pipelineName":"*","stages":[{"stageName":"*","actions":[{}]},{"stageName":"*","actions":[{}]}]},{"addStage":[{"stageName":"*"}]},{"addStage":[{"stageName":"*"}]}]}},"CDKMetadata":{"id":"CDKMetadata","path":"PipelineStack/CDKMetadata","children":{"Default":{"id":"Default","path":"PipelineStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PipelineStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.185.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PipelineStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.185.0"}},"DbStack":{"id":"DbStack","path":"DbStack","children":{"DatabaseVPC":{"id":"DatabaseVPC","path":"DbStack/DatabaseVPC","children":{"Resource":{"id":"Resource","path":"DbStack/DatabaseVPC/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"DbStack/DatabaseVPC"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.185.0"}},"PublicSubnet1":{"id":"PublicSubnet1","path":"DbStack/DatabaseVPC/PublicSubnet1","children":{"Subnet":{"id":"Subnet","path":"DbStack/DatabaseVPC/PublicSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1a","cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"DbStack/DatabaseVPC/PublicSubnet1"}],"vpcId":{"Ref":"DatabaseVPCB5B6076B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"DbStack/DatabaseVPC/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"DbStack/DatabaseVPC/PublicSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DbStack/DatabaseVPC/PublicSubnet1"}],"vpcId":{"Ref":"DatabaseVPCB5B6076B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"DbStack/DatabaseVPC/PublicSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"DatabaseVPCPublicSubnet1RouteTable513D440F"},"subnetId":{"Ref":"DatabaseVPCPublicSubnet1Subnet63B0CC5B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"DbStack/DatabaseVPC/PublicSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"DatabaseVPCIGW5EBED972"},"routeTableId":{"Ref":"DatabaseVPCPublicSubnet1RouteTable513D440F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}},"EIP":{"id":"EIP","path":"DbStack/DatabaseVPC/PublicSubnet1/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"DbStack/DatabaseVPC/PublicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.185.0"}},"NATGateway":{"id":"NATGateway","path":"DbStack/DatabaseVPC/PublicSubnet1/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["DatabaseVPCPublicSubnet1EIP5EE19F1D","AllocationId"]},"subnetId":{"Ref":"DatabaseVPCPublicSubnet1Subnet63B0CC5B"},"tags":[{"key":"Name","value":"DbStack/DatabaseVPC/PublicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{},{"addNatGateway":["*"]}]}},"PublicSubnet2":{"id":"PublicSubnet2","path":"DbStack/DatabaseVPC/PublicSubnet2","children":{"Subnet":{"id":"Subnet","path":"DbStack/DatabaseVPC/PublicSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1b","cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"DbStack/DatabaseVPC/PublicSubnet2"}],"vpcId":{"Ref":"DatabaseVPCB5B6076B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"DbStack/DatabaseVPC/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"DbStack/DatabaseVPC/PublicSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DbStack/DatabaseVPC/PublicSubnet2"}],"vpcId":{"Ref":"DatabaseVPCB5B6076B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"DbStack/DatabaseVPC/PublicSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"DatabaseVPCPublicSubnet2RouteTable8BE59444"},"subnetId":{"Ref":"DatabaseVPCPublicSubnet2Subnet4AF96223"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"DbStack/DatabaseVPC/PublicSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"DatabaseVPCIGW5EBED972"},"routeTableId":{"Ref":"DatabaseVPCPublicSubnet2RouteTable8BE59444"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}},"EIP":{"id":"EIP","path":"DbStack/DatabaseVPC/PublicSubnet2/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"DbStack/DatabaseVPC/PublicSubnet2"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.185.0"}},"NATGateway":{"id":"NATGateway","path":"DbStack/DatabaseVPC/PublicSubnet2/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["DatabaseVPCPublicSubnet2EIP0BF26106","AllocationId"]},"subnetId":{"Ref":"DatabaseVPCPublicSubnet2Subnet4AF96223"},"tags":[{"key":"Name","value":"DbStack/DatabaseVPC/PublicSubnet2"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{},{"addNatGateway":["*"]}]}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"DbStack/DatabaseVPC/PrivateSubnet1","children":{"Subnet":{"id":"Subnet","path":"DbStack/DatabaseVPC/PrivateSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1a","cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"DbStack/DatabaseVPC/PrivateSubnet1"}],"vpcId":{"Ref":"DatabaseVPCB5B6076B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"DbStack/DatabaseVPC/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"DbStack/DatabaseVPC/PrivateSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DbStack/DatabaseVPC/PrivateSubnet1"}],"vpcId":{"Ref":"DatabaseVPCB5B6076B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"DbStack/DatabaseVPC/PrivateSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"DatabaseVPCPrivateSubnet1RouteTableD179C781"},"subnetId":{"Ref":"DatabaseVPCPrivateSubnet1Subnet6D37235E"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"DbStack/DatabaseVPC/PrivateSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"DatabaseVPCPublicSubnet1NATGateway021FE2F8"},"routeTableId":{"Ref":"DatabaseVPCPrivateSubnet1RouteTableD179C781"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"DbStack/DatabaseVPC/PrivateSubnet2","children":{"Subnet":{"id":"Subnet","path":"DbStack/DatabaseVPC/PrivateSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-west-1b","cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"DbStack/DatabaseVPC/PrivateSubnet2"}],"vpcId":{"Ref":"DatabaseVPCB5B6076B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.185.0"}},"Acl":{"id":"Acl","path":"DbStack/DatabaseVPC/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"DbStack/DatabaseVPC/PrivateSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DbStack/DatabaseVPC/PrivateSubnet2"}],"vpcId":{"Ref":"DatabaseVPCB5B6076B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.185.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"DbStack/DatabaseVPC/PrivateSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"DatabaseVPCPrivateSubnet2RouteTable58014196"},"subnetId":{"Ref":"DatabaseVPCPrivateSubnet2Subnet2E9A415D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.185.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"DbStack/DatabaseVPC/PrivateSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"DatabaseVPCPublicSubnet2NATGateway8F7C67AA"},"routeTableId":{"Ref":"DatabaseVPCPrivateSubnet2RouteTable58014196"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.185.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]}},"IGW":{"id":"IGW","path":"DbStack/DatabaseVPC/IGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DbStack/DatabaseVPC"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.185.0"}},"VPCGW":{"id":"VPCGW","path":"DbStack/DatabaseVPC/VPCGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"DatabaseVPCIGW5EBED972"},"vpcId":{"Ref":"DatabaseVPCB5B6076B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.185.0"}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"DbStack/DatabaseVPC/RestrictDefaultSecurityGroupCustomResource","children":{"Default":{"id":"Default","path":"DbStack/DatabaseVPC/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.185.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.185.0","metadata":[{"maxAzs":"*"}]}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"DbStack/Custom::VpcRestrictDefaultSGCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"DbStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.185.0"}},"Role":{"id":"Role","path":"DbStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}},"Handler":{"id":"Handler","path":"DbStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.185.0"}},"PostgresDB":{"id":"PostgresDB","path":"DbStack/PostgresDB","children":{"SubnetGroup":{"id":"SubnetGroup","path":"DbStack/PostgresDB/SubnetGroup","children":{"Default":{"id":"Default","path":"DbStack/PostgresDB/SubnetGroup/Default","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for PostgresDB database","subnetIds":[{"Ref":"DatabaseVPCPrivateSubnet1Subnet6D37235E"},{"Ref":"DatabaseVPCPrivateSubnet2Subnet2E9A415D"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.185.0","metadata":[{"description":"*","vpc":"*","vpcSubnets":"*","removalPolicy":"retain"}]}},"SecurityGroup":{"id":"SecurityGroup","path":"DbStack/PostgresDB/SecurityGroup","children":{"Resource":{"id":"Resource","path":"DbStack/PostgresDB/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for PostgresDB database","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"DatabaseVPCB5B6076B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.185.0","metadata":[{"description":"*","vpc":"*"}]}},"Secret":{"id":"Secret","path":"DbStack/PostgresDB/Secret","children":{"Resource":{"id":"Resource","path":"DbStack/PostgresDB/Secret/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":{"Fn::Join":["",["Generated by the CDK for stack: ",{"Ref":"AWS::StackName"}]]},"generateSecretString":{"passwordLength":30,"secretStringTemplate":"{\"username\":\"postgres\"}","generateStringKey":"password","excludeCharacters":" %+~`#$&*()|[]{}:;<>?!'/@\"\\"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.185.0"}},"Attachment":{"id":"Attachment","path":"DbStack/PostgresDB/Secret/Attachment","children":{"Resource":{"id":"Resource","path":"DbStack/PostgresDB/Secret/Attachment/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"PostgresDBSecretE432A8CB"},"targetId":{"Ref":"PostgresDB113281D2"},"targetType":"AWS::RDS::DBInstance"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.185.0","metadata":[{"secret":"*","target":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseSecret","version":"2.185.0","metadata":[{"encryptionKey":"*","secretName":"*","replicaRegions":"*"},{"username":"*","secretName":"*","encryptionKey":"*","excludeCharacters":"*","replaceOnPasswordCriteriaChanges":"*","replicaRegions":"*"}]}},"Resource":{"id":"Resource","path":"DbStack/PostgresDB/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","copyTagsToSnapshot":true,"dbInstanceClass":"db.t2.micro","dbSubnetGroupName":{"Ref":"PostgresDBSubnetGroup5D444ECC"},"deletionProtection":true,"engine":"postgres","engineVersion":"14","masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"PostgresDBSecretE432A8CB"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"PostgresDBSecretE432A8CB"},":SecretString:password::}}"]]},"maxAllocatedStorage":100,"multiAz":false,"publiclyAccessible":false,"storageType":"gp2","vpcSecurityGroups":[{"Fn::GetAtt":["PostgresDBSecurityGroupEF920298","GroupId"]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.185.0","metadata":[{"engine":{"engineType":"*","singleUserRotationApplication":"*","engineVersion":{"fullVersion":"*","majorVersion":"*"},"parameterGroupFamily":"*","engineFamily":"*","defaultUsername":"*"},"instanceType":"*","vpc":"*","allocatedStorage":"*","maxAllocatedStorage":"*","multiAz":false,"publiclyAccessible":false,"removalPolicy":"retain"}]}},"CDKMetadata":{"id":"CDKMetadata","path":"DbStack/CDKMetadata","children":{"Default":{"id":"Default","path":"DbStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"DbStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.185.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"DbStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.185.0"}},"SqsLambdaStack":{"id":"SqsLambdaStack","path":"SqsLambdaStack","children":{"machine-message-dlq":{"id":"machine-message-dlq","path":"SqsLambdaStack/machine-message-dlq","children":{"Resource":{"id":"Resource","path":"SqsLambdaStack/machine-message-dlq/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"machine-message-dlq","receiveMessageWaitTimeSeconds":20,"visibilityTimeout":30}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.185.0","metadata":[{"queueName":"*","visibilityTimeout":"*","receiveMessageWaitTime":"*"}]}},"machine-message-queue":{"id":"machine-message-queue","path":"SqsLambdaStack/machine-message-queue","children":{"Resource":{"id":"Resource","path":"SqsLambdaStack/machine-message-queue/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"machine-message-queue","receiveMessageWaitTimeSeconds":20,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["machinemessagedlq37FB21AF","Arn"]},"maxReceiveCount":5},"visibilityTimeout":30}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.185.0","metadata":[{"queueName":"*","visibilityTimeout":"*","receiveMessageWaitTime":"*","deadLetterQueue":{"maxReceiveCount":"*","queue":"*"}}]}},"machine-message-lambda":{"id":"machine-message-lambda","path":"SqsLambdaStack/machine-message-lambda","children":{"ServiceRole":{"id":"ServiceRole","path":"SqsLambdaStack/machine-message-lambda/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SqsLambdaStack/machine-message-lambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"SqsLambdaStack/machine-message-lambda/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SqsLambdaStack/machine-message-lambda/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"SqsLambdaStack/machine-message-lambda/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["machinemessagequeueC5D99B30","Arn"]}}],"Version":"2012-10-17"},"policyName":"machinemessagelambdaServiceRoleDefaultPolicyAA7AFB66","roles":[{"Ref":"machinemessagelambdaServiceRole77BCFAF1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"Code":{"id":"Code","path":"SqsLambdaStack/machine-message-lambda/Code","children":{"Stage":{"id":"Stage","path":"SqsLambdaStack/machine-message-lambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.185.0"}},"AssetBucket":{"id":"AssetBucket","path":"SqsLambdaStack/machine-message-lambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.185.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.185.0"}},"Resource":{"id":"Resource","path":"SqsLambdaStack/machine-message-lambda/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-084828585414-eu-west-1","s3Key":"392b903e058ff3e6e84a0c81a330aaec75eada3f30fe3f25afca2c259b84d39e.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["machinemessagelambdaServiceRole77BCFAF1","Arn"]},"runtime":"nodejs22.x"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.185.0"}},"SqsEventSource:SqsLambdaStackmachinemessagequeueEC1E3DCB":{"id":"SqsEventSource:SqsLambdaStackmachinemessagequeueEC1E3DCB","path":"SqsLambdaStack/machine-message-lambda/SqsEventSource:SqsLambdaStackmachinemessagequeueEC1E3DCB","children":{"Resource":{"id":"Resource","path":"SqsLambdaStack/machine-message-lambda/SqsEventSource:SqsLambdaStackmachinemessagequeueEC1E3DCB/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":1000,"eventSourceArn":{"Fn::GetAtt":["machinemessagequeueC5D99B30","Arn"]},"functionName":{"Ref":"machinemessagelambdaE4746BC2"},"maximumBatchingWindowInSeconds":5,"scalingConfig":{"maximumConcurrency":10}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.185.0","metadata":[{"target":"*","batchSize":"*","maxBatchingWindow":"*","maxConcurrency":"*","reportBatchItemFailures":"*","enabled":"*","eventSourceArn":"*","filters":"*","filterEncryption":"*","metricsConfig":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.185.0","metadata":[{"runtime":"*","entry":"*","handler":"*","bundling":{"nodeModules":"*","externalModules":"*"},"code":"*"},{"runtime":"*","entry":"*","handler":"*","bundling":{"nodeModules":"*","externalModules":"*"}}]}},"machine-sqs-lambda":{"id":"machine-sqs-lambda","path":"SqsLambdaStack/machine-sqs-lambda","constructInfo":{"fqn":"@aws-solutions-constructs/aws-sqs-lambda.SqsToLambda","version":"2.79.1"}},"machine-iot-to-sqs":{"id":"machine-iot-to-sqs","path":"SqsLambdaStack/machine-iot-to-sqs","children":{"iot-actions-role":{"id":"iot-actions-role","path":"SqsLambdaStack/machine-iot-to-sqs/iot-actions-role","children":{"Importiot-actions-role":{"id":"Importiot-actions-role","path":"SqsLambdaStack/machine-iot-to-sqs/iot-actions-role/Importiot-actions-role","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"SqsLambdaStack/machine-iot-to-sqs/iot-actions-role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"iot.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SqsLambdaStack/machine-iot-to-sqs/iot-actions-role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"SqsLambdaStack/machine-iot-to-sqs/iot-actions-role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["machinemessagequeueC5D99B30","Arn"]}}],"Version":"2012-10-17"},"policyName":"machineiottosqsiotactionsroleDefaultPolicyC3514454","roles":[{"Ref":"machineiottosqsiotactionsroleA9673EFE"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"IotTopicRule":{"id":"IotTopicRule","path":"SqsLambdaStack/machine-iot-to-sqs/IotTopicRule","attributes":{"aws:cdk:cloudformation:type":"AWS::IoT::TopicRule","aws:cdk:cloudformation:props":{"topicRulePayload":{"ruleDisabled":false,"actions":[{"sqs":{"queueUrl":{"Ref":"machinemessagequeueC5D99B30"},"roleArn":{"Fn::GetAtt":["machineiottosqsiotactionsroleA9673EFE","Arn"]}}}],"sql":"SELECT * as message, topic() from '+/+/data'","description":"Testing the IotToSqs Pattern"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iot.CfnTopicRule","version":"2.185.0"}}},"constructInfo":{"fqn":"@aws-solutions-constructs/aws-iot-sqs.IotToSqs","version":"2.79.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"SqsLambdaStack/CDKMetadata","children":{"Default":{"id":"Default","path":"SqsLambdaStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SqsLambdaStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.185.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SqsLambdaStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.185.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.185.0"}}}